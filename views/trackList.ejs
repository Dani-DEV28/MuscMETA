<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MusicMETA - Album Entry</title>
    <link rel="icon" type="image/jpg" href="img/CD-image.jpg">
    <link rel="stylesheet" href="/styles/style.css">
</head>
<body>
    <div id="headerTitle">
        <form action="/" method="get">
            <button type="submit" id="navi">ðŸ”™ Go Home</button>
        </form>
        <h2>New Album Entry</h2>
        <button onclick="history.go(-1)" id="navi">ðŸ”™ Go Back</button>
    </div>

    <div id="trackInfo">
        <img src="/img/blank-album.jpg" id="trackImg" alt="album cover placeholder">
        
        <form action="/submit-album" method="POST" class="album-form">
            <div class="form-group">
                <label for="albumName">Album Name:</label>
                <input type="text" id="albumName" name="albumName" required>
            </div>

            <div class="form-group">
                <label for="trackCount">Total Tracks:</label>
                <input type="number" id="trackCount" name="trackCount" readonly>
            </div>

            <h3>Track Listing</h3>
            <table class="track-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Track Name</th>
                        <th>Duration</th>
                    </tr>
                </thead>
                <tbody id="trackEntries">
                    <!-- Dynamic track rows will be inserted here -->
                </tbody>
            </table>

            <div class="form-controls">
                <button type="button" onclick="addTrack()" id="navi">âž• Add Track</button>
                <button type="submit" id="navi">ðŸ’¾ Save Album</button>
            </div>
        </form>
    </div>

    <script>
        let trackCount = 0;
        
        function addTrack() {
            trackCount++;
            const tbody = document.getElementById('trackEntries');
            
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><input type="number" name="tracks[${trackCount}][trackNum]" 
                      value="${trackCount}" class="track-num" readonly></td>
                <td><input type="text" name="tracks[${trackCount}][TrackName]" 
                      required placeholder="Enter track name"></td>
                <td><input type="text" name="tracks[${trackCount}][track_length]" 
                      required pattern="[0-9]{1,2}:[0-9]{2}" placeholder="mm:ss"></td>
            `;
            
            tbody.appendChild(row);
            document.getElementById('trackCount').value = trackCount;
        }

        // Initialize with first track
        window.onload = addTrack;
    </script>
</body>
</html>